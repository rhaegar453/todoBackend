(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{50:function(e,t,a){e.exports=a(92)},55:function(e,t,a){},90:function(e,t,a){},92:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(25),l=a.n(o),s=(a(55),a(10)),c=a(11),i=a(13),u=a(12),m=a(14),p=a(15),d=a(108),g=a(103),E=a(100),f=a(107),h=a(20),b=a.n(h),T=function(e){return function(t){t({type:"TASK_GET_START"});var a={"Content-Type":"application/json",authorization:e};b.a.get("http://localhost:3001/api/tasks",{headers:a}).then(function(e){t(function(e){return{type:"TASK_GET_SUCCESS",payload:e.data.data}}(e))}).catch(function(e){t(function(e){return{type:"TASK_GET_FAIL",err:e}}(e))})}},S=a(95),v=a(96),O=a(97),y=a(98),C=a(99),L=a(106),j=a(93),_=a(94),k=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).toggle=function(){a.props.toggleModal()},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=r.a.createElement("button",{className:"close",onClick:this.toggle},"\xd7");return r.a.createElement("div",null,r.a.createElement(L.a,{isOpen:this.props.modalOpen,toggle:this.toggle},r.a.createElement(j.a,{toggle:this.toggle,close:e},this.props.modalTitle),r.a.createElement(_.a,null,this.props.children)))}}]),t}(r.a.Component),N=Object(p.b)(function(e){return{modalOpen:e.ui.modalOpen}},function(e){return{toggleModal:function(){e({type:"MODAL_TOGGLE"})}}})(k),I=a(34),A=a.n(I),w=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).toggle=function(){a.setState({collapse:!a.state.collapse})},a.deleteTaskHandler=function(){var e=a.props.id,t=localStorage.getItem("jwt");a.props.deleteTask(e,t)},a.state={collapse:!1},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=r.a.createElement(A.a,{fromNow:!0},this.props.createdOn),t=r.a.createElement(A.a,{toNow:!0},this.props.endDate);return r.a.createElement("div",null,r.a.createElement(S.a,{isOpen:this.state.collapse},r.a.createElement(v.a,null,r.a.createElement(O.a,{onClick:this.toggle},r.a.createElement("h3",null,this.props.title)),r.a.createElement(y.a,null,r.a.createElement("p",null,"Description:",this.props.description),r.a.createElement("p",null,"Task ends ",t),r.a.createElement("p",null,"Task created ",e),r.a.createElement(C.a,{color:"danger",onClick:this.deleteTaskHandler},"Delete Task")))),r.a.createElement("div",null,r.a.createElement("li",{className:"list-group-item d-flex flex-row justify-content-between",onClick:this.toggle},r.a.createElement("span",null,this.props.title))))}}]),t}(r.a.Component),G=Object(p.b)(null,function(e){return{deleteTask:function(t,a){return e(function(e,t){var a={"Content-Type":"application/json",authorization:t,id:e};return console.log(a),function(e){e({type:"TASK_DELETE_START"}),b.a.delete("http://localhost:3001/api/tasks/delete",{headers:a}).then(function(a){e(function(e){return{type:"TASK_DELETE_SUCCESS",payload:e}}(a)),e(T(t))}).catch(function(t){console.log(t),e(function(e){return{type:"TASK_DELETE_FAIL",payload:e}}(t))})}}(t,a))}}})(w),D=a(101),R=a(102),K=function(e){return r.a.createElement("div",null,r.a.createElement("h1",null,"Task Management Made Easy"),r.a.createElement(E.a,{to:"/login"},"Click Here to Login"))},M=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).createTask=function(e){e.preventDefault(),a.props.modalToggle()},a.toggle=function(){return[a.props.modalToggle()]},a.submitHandler=function(e){e.preventDefault();var t=localStorage.getItem("jwt");a.props.createTask(t,a.state.title,a.state.description,a.state.endDate)},a.state={tokenAvailable:!1,title:"",description:"",endDate:"",isLoggedIn:!1},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){try{var e=localStorage.getItem("jwt");if(!e)throw new Error("Token not found");this.props.getDetails(e),console.log("Requesting for the list of tasks"),this.props.listTasks(e)}catch(t){console.log("Not logged in")}}},{key:"render",value:function(){var e=this,t=this.props.modalState?r.a.createElement("div",null,r.a.createElement(N,{modalTitle:"New Task"},r.a.createElement("form",{onSubmit:this.submitHandler},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Title"),r.a.createElement("input",{className:"form-control",autoComplete:"off",onChange:function(t){return e.setState({title:t.target.value})}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Description"),r.a.createElement("textarea",{className:"form-control rounded-10",onChange:function(t){return e.setState({description:t.target.value})}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"End Date"),r.a.createElement(D.a,{type:"date",onChange:function(t){return e.setState({endDate:t.target.value})}})),r.a.createElement(R.a,null,r.a.createElement(C.a,{color:"success",size:"lg",type:"submit"},"Create Task"),r.a.createElement("button",{onClick:this.toggle,className:"btn btn-danger btn-lg"},"Cancel"))))):null;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",null,t,r.a.createElement("div",{className:"container",id:"startContainer"},r.a.createElement("div",{className:"row"},this.props.isLoggedIn&&r.a.createElement("div",{className:"col-10"},r.a.createElement("h1",{className:"d-flex flex-row justify-content-between"},"My Tasks",r.a.createElement("button",{className:"btn btn-primary",type:"button",onClick:this.createTask},"Create New Task"),r.a.createElement("h2",null,"Days Left"))),!this.props.isLoggedIn&&r.a.createElement(K,null)),r.a.createElement("div",{className:"col-md-10"},this.props.tasks.map(function(e){return r.a.createElement(G,{title:e.title,description:e.description,endDate:e.endDate,key:e._id,id:e._id,createdOn:e.createdDate})}))))))}}]),t}(r.a.Component),U=Object(p.b)(function(e){return{isLoggedIn:e.auth.isLoggedIn,tasks:e.task.tasks,username:e.auth.username,modalState:e.ui.modalOpen}},function(e){return{notLoggedIn:function(){return e({type:"CHECK_LOGIN_FAIL",payload:"AutoLogin Failed"})},getDetails:function(t){return e(function(e){return function(t){t({type:"CHECK_LOGIN_START"}),console.log("Make a call to the server to fetch the details");var a={"Content-Type":"application/json",authorization:e};b.a.get("http://localhost:3001/api/auth/userDetails",{headers:a}).then(function(a){console.log(a),t(function(e,t){return{type:"CHECK_LOGIN_SUCCESS",data:e,token:t}}(a,e))}).catch(function(e){console.log(e),t({type:"CHECK_LOGIN_FAIL",payload:"AutoLogin Failed"})})}}(t))},listTasks:function(t){return e(T(t))},modalToggle:function(){return e({type:"MODAL_TOGGLE"})},createTask:function(t,a,n,r){return e(function(e,t,a,n){return function(r){r({type:"TASK_CREATE_START"});var o={"Content-Type":"application/json",authorization:e},l={title:t,description:a,endDate:n};b.a.post("http://localhost:3001/api/tasks/newTask",l,{headers:o}).then(function(t){r({type:"TASK_CREATE_SUCCESS"}),r(T(e)),r({type:"MODAL_TOGGLE"})}).catch(function(e){r(function(e){return{type:"TASK_CREATE_FAIL",payload:e}}(e))})}}(t,a,n,r))}}})(Object(f.a)(M)),F=(a(90),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).logoutHandler=function(){setTimeout(function(){a.props.logout(),localStorage.clear(),a.props.nullify(),setTimeout(function(){a.props.history.push("/login")},500)},1e3)},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.isLoggedIn?r.a.createElement("button",{className:"btn btn-primary",type:"button",id:"authbuttons",onClick:this.logoutHandler},"Log Out"):r.a.createElement("div",null," ",r.a.createElement(E.a,{to:"/register"},r.a.createElement(C.a,{color:"primary",outline:!0},"Register")),r.a.createElement(E.a,{to:"/login"},r.a.createElement(C.a,{color:"success",outline:!0,style:{marginLeft:"10px"}},"Login")));return r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar navbar-dark navbar-expand-md fixed-top bg-dark"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement(E.a,{className:"navbar-brand",to:"/"},r.a.createElement("i",{className:"icon ion-ios-football"}),"\xa0GoalTracker"),r.a.createElement("button",{className:"navbar-toggler","data-toggle":"collapse","data-target":"#navcol-1"},r.a.createElement("span",{className:"sr-only"},"Toggle navigation"),r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse d-flex flex-row-reverse",id:"navcol-1"}),e)))}}]),t}(r.a.Component)),x=Object(p.b)(function(e){return{isLoggedIn:e.auth.isLoggedIn}},function(e){return{logout:function(){return e({type:"LOGOUT"})},nullify:function(){return e({type:"TASK_NULLIFY"})}}})(Object(f.a)(F)),H=a(105),z=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault(),console.log("Submit Successful"),a.props.login(a.state.email,a.state.password),setTimeout(function(){a.props.loginSuccess&&a.props.history.push("/")},1e3)},a.state={email:"",password:""},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.error?r.a.createElement("p",null,this.props.errorMessage):null,a=this.props.isLoggedIn?r.a.createElement(H.a,{to:"/"}):r.a.createElement("div",{className:"login-clean"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("h2",{className:"sr-only"},"Login Form"),r.a.createElement("div",{className:"illustration"},r.a.createElement("h1",null,"Login"),r.a.createElement("i",{className:"icon ion-ios-football"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{autoComplete:"off",className:"form-control",type:"email",name:"email",placeholder:"Email",onChange:function(t){return e.setState({email:t.target.value})},value:this.state.email})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{onChange:function(t){return e.setState({password:t.target.value})},autoComplete:"off",className:"form-control",type:"password",name:"password",placeholder:"Password",value:this.state.password})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary btn-block",type:"submit"},"Log In"),t)));return r.a.createElement("div",null,a)}}]),t}(r.a.Component),P=Object(p.b)(function(e){return{isLoggedIn:e.auth.isLoggedIn,loginSuccess:e.auth.success,error:e.auth.error,errorMessage:e.auth.loginErrMessage}},function(e){return{login:function(t,a){return e(function(e,t){return function(a){a({type:"LOGIN_START"});var n={email:e,password:t};b.a.post("http://localhost:3001/api/auth/login",n,{headers:{"Content-Type":"application/json"}}).then(function(e){a(function(e){return{type:"LOGIN_SUCCESS",token:e.data.token}}(e)),localStorage.setItem("jwt",e.data.token),localStorage.setItem("loggedIn",!0),a(T(e.data.token))}).catch(function(e){a((e.response,{type:"LOGIN_FAIL",payload:"Login Failed"}))})}}(t,a))}}})(Object(f.a)(z)),B=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault(),a.props.registerUser(a.state.email,a.state.password,a.state.username),setTimeout(function(){a.props.redirect&&a.props.history.push("/login")},1e3)},a.state={email:"",password:"",username:""},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.error?r.a.createElement("p",null,this.props.errorMessage):null;return r.a.createElement("div",null,r.a.createElement("div",{className:"login-clean"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("h2",{className:"sr-only"},"Login Form"),r.a.createElement("div",{className:"illustration"},r.a.createElement("h1",null,"Sign Up"),r.a.createElement("i",{className:"icon ion-ios-football"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{autoComplete:"off",className:"form-control",type:"email",name:"email",placeholder:"Email",onChange:function(t){e.setState({email:t.target.value})}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{autoComplete:"off",className:"form-control",type:"text",placeholder:"Username",onChange:function(t){e.setState({username:t.target.value})}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{autoComplete:"off",className:"form-control",type:"password",name:"password",placeholder:"Password",onChange:function(t){e.setState({password:t.target.value})}})),r.a.createElement("div",{className:"form-group"},t,r.a.createElement("button",{className:"btn btn-primary btn-block",type:"submit"},"Sign Up")))))}}]),t}(r.a.Component),J=Object(p.b)(function(e){return{redirect:e.auth.redirect,error:e.auth.registerError,errorMessage:e.auth.errorMessage}},function(e){return{registerUser:function(t,a,n){return e(function(e,t,a){return function(n){n({type:"REGISTER_START"});var r={email:e,password:t,username:a};b.a.post("http://localhost:3001/api/auth/register",r,{headers:{"Content-type":"application/json"}}).then(function(e){console.log(e),n({type:"REGISTER_SUCCESS",payload:e.data.data})}).catch(function(e){console.log(e.response.data.message),n({type:"REGISTER_FAIL",payload:e.response.data.message})})}}(t,a,n))}}})(B),W=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(x,null),r.a.createElement("div",{style:{marginTop:"70px"}},r.a.createElement(d.a,null,r.a.createElement(g.a,{path:"/",exact:!0,component:U}),r.a.createElement(g.a,{path:"/login",exact:!0,component:P}),r.a.createElement(g.a,{path:"/register",exact:!0,component:J}))))}}]),t}(r.a.Component),X=function(e){function t(e){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(W,null))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Y=a(23),q=a(9),V=function(e,t){return Object(q.a)({},e,t)},$={isLoggedIn:!1,username:!1,loading:!1,error:!1,registerError:!1,errorMessage:"",loginErrMessage:"",regSuccess:!1,token:null,data:null,redirect:!1},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHECK_LOGIN_START":return V(e,{loading:!0,isLoggedIn:!1});case"CHECK_LOGIN_FAIL":return V(e,{loading:!1,isLoggedIn:!1});case"CHECK_LOGIN_SUCCESS":return V(e,{loading:!1,isLoggedIn:!0,token:t.token,username:t.data.data.username});case"LOGIN_START":return V(e,{loading:!0,isLoggedIn:!1});case"LOGIN_SUCCESS":return Object(q.a)({},e,{loading:!1,isLoggedIn:!0,success:!0,token:t.token});case"LOGIN_FAIL":return V(e,{loading:!1,error:!0,loginErrMessage:t.payload});case"REGISTER_START":return V(e,{loading:!0});case"REGISTER_SUCCESS":return V(e,{loading:!1,isLoggedIn:!1,regSuccess:!0,redirect:!0});case"REGISTER_FAIL":return V(e,{loading:!1,registerError:!0,redirect:!1,errorMessage:t.payload});case"LOGOUT":return V(e,{loading:!1,username:!1,token:null,isLoggedIn:!1,success:!1});default:return e}},Z={modalOpen:!1},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z;switch((arguments.length>1?arguments[1]:void 0).type){case"MODAL_TOGGLE":return Object(q.a)({},e,{modalOpen:!e.modalOpen});default:return e}},te={error:!1,loading:!1,tasks:[]},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TASK_CREATE_START":return Object(q.a)({},e,{loading:!0});case"TASK_CREATE_FAIL":return Object(q.a)({},e,{loading:!1,error:!0});case"TASK_CREATE_SUCCESS":return Object(q.a)({},e,{loading:!1,error:!1});case"TASK_DELETE_START":return Object(q.a)({},e,{loading:!0,error:!1});case"TASK_DELETE_FAIL":return Object(q.a)({},e,{loading:!1,error:!0});case"TASK_DELETE_SUCCESS":return Object(q.a)({},e,{loading:!1,data:t.payload});case"TASK_GET_START":return Object(q.a)({},e,{loading:!0});case"TASK_GET_FAIL":return Object(q.a)({},e,{error:!0});case"TASK_GET_SUCCESS":return Object(q.a)({},e,{tasks:t.payload,loading:!1});case"TASK_NULLIFY":return Object(q.a)({},e,{tasks:[]});default:return e}},ne=a(104),re=a(49),oe=Object(Y.c)({auth:Q,ui:ee,task:ae}),le=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Y.d,se=Object(Y.e)(oe,le(Object(Y.a)(re.a)));l.a.render(r.a.createElement(p.a,{store:se},r.a.createElement(ne.a,null,r.a.createElement(X,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[50,2,1]]]);
//# sourceMappingURL=main.421a8c71.chunk.js.map